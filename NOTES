(use '(org.gnu.clojure.gnunet bloomfilter core crypto exception filesharing hello hostlist inet iostream message parser peer tcp transport util))
(def random (java.security.SecureRandom.))
(def keypair (generate-rsa-keypair! random))
(def my-peer (new-peer {:public-key (.getPublic keypair) :private-key (.getPrivate keypair) :random random}))
(.start (:selector-thread my-peer))
(activate-tcp! my-peer 5678)
(configure-inet-addresses! my-peer "tcp" (get-local-addresses) 5678)
(activate-filesharing! my-peer)
(download-hostlist! (partial admit-hello! my-peer) "http://localhost:58080")
